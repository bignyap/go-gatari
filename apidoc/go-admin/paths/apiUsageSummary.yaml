paths:
  /apiUsageSummary:
    # post:
    #   summary: Create an API usage summary
    #   operationId: createApiUsageSummary
    #   tags:
    #     - API Usage
    #   requestBody:
    #     required: true
    #     content:
    #       application/x-www-form-urlencoded:
    #         schema:
    #           $ref: '../schemas/ApiUsageSummary.yaml#/CreateApiUsageSummaryInput'
    #   responses:
    #     '201':
    #       description: Successfully created API usage summary.
    #       content:
    #         application/json:
    #           schema:
    #             $ref: '../schemas/ApiUsageSummary.yaml#/CreateApiUsageSummaryOutput'
    get:
      summary: Get grouped API usage summaries
      operationId: getApiUsageSummary
      tags:
        - API Usage
      parameters:
        - name: organization_id
          in: query
          required: false
          schema:
            type: integer
        - name: subscription_id
          in: query
          required: false
          schema:
            type: integer
        - name: endpoint_id
          in: query
          required: false
          schema:
            type: integer
        - name: start_date
          in: query
          required: false
          schema:
            type: integer
            description: Unix timestamp
        - name: end_date
          in: query
          required: false
          schema:
            type: integer
            description: Unix timestamp
        - name: group_by
          in: query
          required: true
          schema:
            type: boolean
            default: false
            description: Grouping criteria for the API usage summary.
        - name: page_number
          in: query
          required: false
          schema:
            type: integer
            default: 1
        - name: items_per_page
          in: query
          required: false
          schema:
            type: integer
            default: 100
      responses:
        '200':
          description: Successfully retrieved grouped API usage summary.
          content:
            application/json:
              schema:
                type: array
                items:
                  oneOf:
                    - $ref: '../schemas/ApiUsageSummary.yaml#/GetApiUsageSummaryOutput'
                    - $ref: '../schemas/ApiUsageSummary.yaml#/GetApiUsageSummaryOutputGroupedByDay'
        '400':
          description: Invalid input or unsupported groupBy value
        '500':
          description: Server error while retrieving usage summary

  /apiUsageSummary/batch:
    post:
      summary: Create API usage summaries in bulk
      operationId: createApiUsageSummariesInBulk
      tags:
        - API Usage
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: array
              items:
                $ref: '../schemas/ApiUsageSummary.yaml#/CreateApiUsageSummaryInput'
      responses:
        '201':
          description: Successfully created API usage summaries.